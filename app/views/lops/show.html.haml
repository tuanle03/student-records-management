#screen-lop-show.screen.w-full.h-full.bg-slate-900.flex.flex-col
  %header.bg-slate-800.border-b.border-slate-700.px-6.py-4
    .flex.items-center.justify-between
      .flex.items-center.gap-4
        = link_to lops_path, class: "focus-outline p-2 hover:bg-slate-700 rounded-lg transition" do
          %svg.w-5.h-5.text-slate-300{ fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }
            %path{ "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": 2,
                   d: "M10 19l-7-7m0 0l7-7m-7 7h18" }
        %div
          %h1.text-lg.font-bold.text-amber-300= "Lớp #{@lop.ma_lop}"
          %p.text-xs.text-slate-400= @lop.ten
      .flex.items-center.gap-2
        = link_to "Sửa",
                  edit_lop_path(@lop),
                  class: "focus-outline px-3 py-1.5 bg-emerald-500/80 hover:bg-emerald-500 text-slate-900 text-xs font-semibold rounded-lg transition"

  %main.flex-1.overflow-auto.p-6
    .max-w-5xl.mx-auto.space-y-6
      / Thông tin lớp
      .bg-slate-800.border.border-slate-700.rounded-2xl.p-4
        %h2.text-sm.font-semibold.text-slate-200.mb-3 Thông tin lớp
        %dl.space-y-2.text-sm.text-slate-300
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Mã lớp
            %dd.font-medium= @lop.ma_lop
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Tên lớp
            %dd.font-medium= @lop.ten
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Khóa học
            %dd.font-medium= (@lop.khoa_hoc&.ten || @lop.khoa_hoc).to_s
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Ngành
            %dd.font-medium= @lop.nganh&.ten_nganh
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Hệ đào tạo
            %dd.font-medium= @lop.he_dao_tao&.ten
          %div.flex.justify-between.gap-4
            %dt.text-slate-400 Mã cán bộ phụ trách
            %dd.font-medium= @lop.ma_cb
          %div
            %dt.text-slate-400.mb-1 Ghi chú
            %dd.text-sm.text-slate-300{ class: "bg-slate-900/60 rounded-lg p-2 min-h-[2rem]" }
              = @lop.ghi_chu.presence || "Không có"

      / Danh sách học viên
      .bg-slate-800.border.border-slate-700.rounded-2xl.p-4
        %h2.text-sm.font-semibold.text-slate-200.mb-3 Danh sách học viên
        - if @students.any?
          .overflow-x-auto.table-scroll
            %table.w-full
              %thead{ class: "bg-slate-900/80" }
                %tr
                  %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 #
                  %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Mã SV
                  %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Họ tên
                  %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Ngành
                  %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Thao tác
              %tbody
                - @students.each_with_index do |s, index|
                  %tr{ class: "hover:bg-slate-700/30 transition" }
                    %td.px-4.py-3.text-sm.text-slate-400.border-b.border-slate-700= index + 1
                    %td.px-4.py-3.text-sm.text-slate-200.border-b.border-slate-700.font-medium= s.ma_sv
                    %td.px-4.py-3.text-sm.text-slate-200.border-b.border-slate-700= "#{s.ho_dem} #{s.ten}".strip
                    %td.px-4.py-3.text-sm.text-slate-200.border-b.border-slate-700= s.nganh&.ten_nganh
                    %td.px-4.py-3.text-sm.border-b.border-slate-700
                      = link_to "Xem chi tiết",
                                student_path(s.ma_sv),
                                class: "text-xs px-3 py-1 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full transition"
        - else
          %p.text-sm.text-slate-400 Chưa có học viên nào trong lớp này.
