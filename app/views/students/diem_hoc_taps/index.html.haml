#screen-student-grades.screen.w-full.h-full.bg-slate-900.flex.flex-col
  %header.bg-slate-800.border-b.border-slate-700.px-6.py-4
    .flex.items-center.justify-between
      .flex.items-center.gap-4
        = link_to student_path(@student), class: "focus-outline p-2 hover:bg-slate-700 rounded-lg transition" do
          %svg.w-6.h-6.text-slate-300{ fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }
            %path{ "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": 2,
                   d: "M10 19l-7-7m0 0l7-7m-7 7h18" }
        %div
          %h1.text-lg.font-bold.text-amber-300
            Bảng điểm – #{@student.ho_ten}
          %p.text-xs.text-slate-400
            Mã học viên: #{@student.ma_sv}
      %div.text-right.text-xs.text-slate-400
        - if current_user.teacher?
          = link_to "Thêm điểm môn học",
                    new_student_diem_hoc_tap_path(@student),
                    class: "focus-outline px-4 py-2 bg-amber-400 hover:bg-amber-300 text-slate-900 font-semibold rounded-lg text-sm transition flex items-center gap-2"

  %main.flex-1.overflow-auto.p-6
    .max-w-7xl.mx-auto
      .bg-slate-800.border.border-slate-700.rounded-xl.overflow-hidden
        .overflow-x-auto.table-scroll
          %table.w-full
            %thead{ class: "bg-slate-900/80" }
              %tr
                %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Học kỳ
                %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Mã môn
                %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Tên môn học
                %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Điểm BP
                %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Điểm KTHP
                %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Điểm ĐGHP
                %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Thi lại lần 1
                %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Thi lại lần 2
                %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Ghi chú
                -# %th.px-4.py-3.text-center.text-xs.font-semibold.text-slate-300.border-b.border-slate-700 Thao tác
            %tbody
              - if @grades.any?
                - @grades.each do |g|
                  - tb = g.diem_tb || g.tinh_diem_tb
                  %tr{ class: "hover:bg-slate-700/30 transition" }
                    %td.px-4.py-3.text-sm.text-slate-300.border-b.border-slate-700= g.ma_hoc_ky
                    %td.px-4.py-3.text-sm.text-slate-200.border-b.border-slate-700= g.ma_mon_hoc
                    %td.px-4.py-3.text-sm.text-slate-200.border-b.border-slate-700= g.mon_hoc&.ten
                    %td.px-4.py-3.text-sm.text-center.text-slate-200.border-b.border-slate-700= g.diem_gp
                    %td.px-4.py-3.text-sm.text-center.text-slate-200.border-b.border-slate-700= g.diem_hp
                    %td.px-4.py-3.text-sm.text-center.text-emerald-300.border-b.border-slate-700.font-semibold= tb
                    %td.px-4.py-3.text-sm.text-center.text-slate-200.border-b.border-slate-700= g.diem_thi_lai_lan1
                    %td.px-4.py-3.text-sm.text-center.text-slate-200.border-b.border-slate-700= g.diem_thi_lai_lan2
                    %td.px-4.py-3.text-sm.text-slate-300.border-b.border-slate-700= g.ghi_chu
              - else
                %tr
                  %td.px-4.py-4.text-sm.text-slate-400.border-b.border-slate-700.text-center{ colspan: 10 }
                    Chưa có điểm học tập cho học viên này.
